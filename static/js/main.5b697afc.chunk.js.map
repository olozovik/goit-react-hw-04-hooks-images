{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/ImageGallery/ImageGallery.module.css","components/ButtonMore/ButtonMore.module.css","components/Searchbar/Searchbar.jsx","api/fetchImages.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/ButtonMore/ButtonMore.jsx","components/Loader/Loader.jsx","App.jsx","index.js"],"names":["module","exports","headerRoot","document","querySelector","Searchbar","state","value","onChange","e","target","setState","props","handleQuery","inputId","uuidv4","createPortal","className","s","header","inputWrapper","htmlFor","label","icon","input","debounceTimeout","id","type","autoComplete","autoFocus","placeholder","this","Component","baseURL","key","fetchImages","a","page","query","axios","data","console","log","message","ImageGalleryItem","url","tags","onClick","largeImage","item","image","src","alt","ImageGallery","prevProps","images","length","window","matchMedia","matches","scrollTo","top","documentElement","scrollHeight","behavior","handleClickImage","list","map","webformatURL","largeImageURL","modalRoot","Modal","getTags","selectedImage","find","handleEscClose","code","handleCloseModal","addEventListener","body","style","overflow","removeEventListener","handleBackdropClose","backdrop","button","close","modal","ButtonMore","handleClickLoadMore","loadingRoot","Loader","wrapper","loader","color","height","width","App","quantityImages","totalHits","status","trim","split","filter","join","nodeName","prevState","_","getImages","hits","setImages","receivedImages","p","isLoadPossible","isLoading","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5b697afc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Searchbar_header__2rfPG\",\"inputWrapper\":\"Searchbar_inputWrapper__njQgP\",\"label\":\"Searchbar_label__7Dzee\",\"icon\":\"Searchbar_icon__3a5pq\",\"input\":\"Searchbar_input__2mPvn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__31rpU\",\"modal\":\"Modal_modal__3KYZI\",\"button\":\"Modal_button__1OX1I\",\"close\":\"Modal_close__cKYyZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__OsAvu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Loader_wrapper__1RZ9M\",\"loader\":\"Loader_loader__1Izfm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ImageGallery_list__-uIIL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ButtonMore_button__1DPFc\"};","import { Component } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { DebounceInput } from 'react-debounce-input';\nimport { FaSearch } from 'react-icons/fa';\nimport { createPortal } from 'react-dom';\nimport s from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nconst headerRoot = document.querySelector('#header-root');\n\nclass Searchbar extends Component {\n  static propTypes = {\n    handleQuery: PropTypes.func.isRequired,\n  };\n\n  state = {\n    value: null,\n  };\n\n  onChange = e => {\n    const value = e.target.value;\n    this.setState({ value });\n    this.props.handleQuery(value);\n  };\n\n  render() {\n    const inputId = uuidv4();\n    return createPortal(\n      <header className={s.header}>\n        <div className={s.inputWrapper}>\n          <label htmlFor={inputId} className={s.label}>\n            <FaSearch className={s.icon} />\n            <DebounceInput\n              className={s.input}\n              debounceTimeout={750}\n              id={inputId}\n              type=\"text\"\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              value={this.state.value}\n              onChange={this.onChange}\n            />\n          </label>\n        </div>\n      </header>,\n      headerRoot,\n    );\n  }\n}\n\nexport { Searchbar };\n","import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\nconst key = '21989340-5677ac132e2fa2f040ad0925d';\nconst perPage = 12;\n\nconst fetchImages = async ({ page = 1, query } = {}) => {\n  try {\n    const data = await axios(\n      `${baseURL}?q=${query}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\n    );\n    return data;\n  } catch (e) {\n    console.log(e.message);\n  }\n};\n\nexport { fetchImages };\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ url, tags, onClick, largeImage }) => {\n  return (\n    <li className={s.item}>\n      <img\n        className={s.image}\n        src={url}\n        alt={tags}\n        onClick={() => onClick(largeImage)}\n      />\n    </li>\n  );\n};\n\nexport { ImageGalleryItem };\n\nImageGalleryItem.propTypes = {\n  url: PropTypes.string,\n  tags: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n  largeImage: PropTypes.string,\n};\n","import PropTypes from 'prop-types';\nimport { ImageGalleryItem } from './ImageGalleryItem/ImageGalleryItem';\nimport s from './ImageGallery.module.css';\nimport { Component } from 'react';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(PropTypes.object),\n    handleClickImage: PropTypes.func.isRequired,\n  };\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.images !== this.props.images &&\n      this.props.images.length > 12 &&\n      window.matchMedia('(min-width: 1600px)').matches\n    ) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight - 1090,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  render() {\n    const { images, handleClickImage } = this.props;\n    return (\n      <ul className={s.list}>\n        {images.map(image => (\n          <ImageGalleryItem\n            key={`${image.id} ${image.webformatURL}`}\n            url={image.webformatURL}\n            largeImage={image.largeImageURL}\n            tags={image.tags}\n            onClick={handleClickImage}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport { ImageGallery };\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport { IoCloseCircleOutline } from 'react-icons/io5';\nimport s from './Modal.module.css';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    url: PropTypes.string,\n    images: PropTypes.arrayOf(PropTypes.object),\n    handleCloseModal: PropTypes.func.isRequired,\n    handleBackdropClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleEscClose);\n    document.body.style.overflow = 'hidden';\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleEscClose);\n    document.body.style.overflow = 'auto';\n  }\n\n  getTags = () => {\n    const { url, images } = this.props;\n    const selectedImage = images.find(image => image.largeImageURL === url);\n    if (selectedImage) {\n      return selectedImage.tags;\n    }\n  };\n\n  handleEscClose = e => {\n    if (e.code === 'Escape') {\n      this.props.handleCloseModal();\n    }\n  };\n\n  render() {\n    const { handleBackdropClose, handleCloseModal, url } = this.props;\n\n    return createPortal(\n      <div className={s.backdrop} onClick={e => handleBackdropClose(e)}>\n        <button\n          className={s.button}\n          type={'button'}\n          aria-label={'Close'}\n          onClick={handleCloseModal}\n        >\n          <IoCloseCircleOutline className={s.close} />\n        </button>\n        <div className={s.modal}>\n          <img src={url} alt={this.getTags()} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport { Modal };\n","import s from './ButtonMore.module.css';\n\nconst ButtonMore = ({ handleClickLoadMore }) => {\n  return (\n    <button className={s.button} type={'button'} onClick={handleClickLoadMore}>\n      Load more\n    </button>\n  );\n};\n\nexport { ButtonMore };\n","import LoaderOval from 'react-loader-spinner';\nimport { createPortal } from 'react-dom';\nimport s from './Loader.module.css';\n\nconst loadingRoot = document.querySelector('#loading-root');\n\nconst Loader = () => {\n  return createPortal(\n    <div className={s.wrapper}>\n      <LoaderOval\n        className={s.loader}\n        type=\"Oval\"\n        color=\"#3faae5\"\n        height={75}\n        width={75}\n      />\n    </div>,\n    loadingRoot,\n  );\n};\n\nexport { Loader };\n","import { Component } from 'react';\nimport 'modern-normalize/modern-normalize.css';\nimport { Searchbar } from './components/Searchbar/Searchbar';\nimport { fetchImages } from 'api/fetchImages';\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\nimport { Modal } from 'components/Modal/Modal';\nimport { ButtonMore } from './components/ButtonMore/ButtonMore';\nimport { Loader } from 'components/Loader/Loader';\n\nclass App extends Component {\n  async componentDidUpdate(_, prevState) {\n    const getImages = async (page, query) => {\n      this.setState({ status: 'pending' });\n      const data = await fetchImages({ page, query });\n      this.setState({ totalHits: data.data.totalHits });\n      return data.data.hits;\n    };\n\n    const { page, query } = this.state;\n\n    const setImages = receivedImages => {\n      if (prevState.page !== page) {\n        this.setState(p => ({\n          images: [...p.images, ...receivedImages],\n        }));\n      }\n      if (prevState.query !== query) {\n        this.setState({\n          images: receivedImages,\n        });\n      }\n    };\n\n    if (prevState.query !== query || prevState.page !== page) {\n      if (query.trim() === '' || query.length < 2) {\n        return;\n      }\n\n      if (prevState.query !== query && page > 1) {\n        this.setState({ page: 1, images: [] });\n        return;\n      }\n\n      const receivedImages = await getImages(page, query);\n      setImages(receivedImages);\n      this.setState({\n        quantityImages: this.state.images.length,\n        status: 'resolved',\n      });\n    }\n  }\n\n  state = {\n    query: null,\n    page: 1,\n    images: [],\n    quantityImages: 0,\n    totalHits: 0,\n    selectedImage: null,\n    status: 'idle',\n  };\n\n  handleQuery = value => {\n    const query = value\n      .trim()\n      .split(' ')\n      .filter(item => item !== '' && item !== ' ')\n      .join('+');\n    this.setState({ query });\n  };\n\n  handleClickImage = largeImage => {\n    this.setState({ selectedImage: largeImage });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ selectedImage: null });\n  };\n\n  handleBackdropClose = e => {\n    if (e.target.nodeName !== 'IMG') {\n      this.handleCloseModal();\n    }\n  };\n\n  handleClickLoadMore = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  render() {\n    const { selectedImage, images, status, quantityImages, totalHits } =\n      this.state;\n\n    const isLoadPossible = images.length > 0 && quantityImages < totalHits;\n    const isLoading = status === 'pending';\n\n    return (\n      <>\n        <Searchbar handleQuery={this.handleQuery} />\n        {isLoading && <Loader />}\n        <ImageGallery\n          images={images}\n          handleClickImage={this.handleClickImage}\n        />\n        {isLoadPossible && (\n          <ButtonMore handleClickLoadMore={this.handleClickLoadMore} />\n        )}\n        {selectedImage && (\n          <Modal\n            url={selectedImage}\n            images={images}\n            handleCloseModal={this.handleCloseModal}\n            handleBackdropClose={this.handleBackdropClose}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport { App };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}