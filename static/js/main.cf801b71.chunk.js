(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={backdrop:"Modal_backdrop__31rpU",modal:"Modal_modal__3KYZI",button:"Modal_button__1OX1I",close:"Modal_close__cKYyZ"}},15:function(e,t,a){e.exports={item:"ImageGalleryItem_item__OsAvu"}},16:function(e,t,a){e.exports={wrapper:"Loader_wrapper__1RZ9M",loader:"Loader_loader__1Izfm"}},29:function(e,t,a){e.exports={list:"ImageGallery_list__-uIIL"}},31:function(e,t,a){e.exports={button:"ButtonMore_button__1DPFc"}},37:function(e,t,a){},8:function(e,t,a){e.exports={header:"Searchbar_header__2rfPG",inputWrapper:"Searchbar_inputWrapper__njQgP",label:"Searchbar_label__7Dzee",icon:"Searchbar_icon__3a5pq",input:"Searchbar_input__2mPvn"}},83:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(6),o=a.n(r),u=(a(37),a(17)),i=a(7),s=a.n(i),l=a(10),d=a(5),b=(a(39),a(85)),p=a(26),j=a(27),m=a(8),f=a.n(m),h=a(2),O=document.querySelector("#header-root"),g=function(e){var t=e.handleQuery,a=Object(n.useState)(""),c=Object(d.a)(a,2),o=c[0],u=c[1],i=Object(b.a)();return Object(r.createPortal)(Object(h.jsx)("header",{className:f.a.header,children:Object(h.jsx)("div",{className:f.a.inputWrapper,children:Object(h.jsxs)("label",{htmlFor:i,className:f.a.label,children:[Object(h.jsx)(j.a,{className:f.a.icon}),Object(h.jsx)(p.DebounceInput,{className:f.a.input,debounceTimeout:750,id:i,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){var a=e.target.value;u(a),t(a)}})]})})}),O)},_=a(28),v=a.n(_),x="https://pixabay.com/api/",y="21989340-5677ac132e2fa2f040ad0925d",w=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n,c,r,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},a=t.page,n=void 0===a?1:a,c=t.query,e.prev=1,e.next=4,v()("".concat(x,"?q=").concat(c,"&page=").concat(n,"&key=").concat(y,"&image_type=photo&orientation=horizontal&per_page=").concat(12));case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),k=a(15),S=a.n(k),C=function(e){var t=e.url,a=e.tags,n=e.onClick,c=e.largeImage;return Object(h.jsx)("li",{className:S.a.item,children:Object(h.jsx)("img",{className:S.a.image,src:t,alt:a,onClick:function(){return n(c)},loading:"lazy"})})},I=a(29),N=a.n(I),M=function(e){window.scrollTo({top:e,behavior:"smooth"})},L=function(e){var t=e.images,a=e.handleClickImage;return Object(n.useEffect)((function(){t.length>12&&window.matchMedia("(min-width: 1600px)").matches&&M(document.documentElement.scrollHeight-1090)}),[t]),Object(h.jsx)("ul",{className:N.a.list,children:t.map((function(e){return Object(h.jsx)(C,{url:e.webformatURL,largeImage:e.largeImageURL,tags:e.tags,onClick:a},"".concat(e.id," ").concat(e.webformatURL))}))})},E=a(30),q=a(11),P=a.n(q),R=document.querySelector("#modal-root"),U=function(e){var t=e.url,a=e.images,c=e.handleCloseModal,o=e.handleBackdropClose;Object(n.useEffect)((function(){return document.addEventListener("keydown",u),document.body.style.overflow="hidden",function(){document.removeEventListener("keydown",u),document.body.style.overflow="auto"}}));var u=function(e){"Escape"===e.code&&c()};return Object(r.createPortal)(Object(h.jsxs)("div",{className:P.a.backdrop,onClick:o,children:[Object(h.jsx)("button",{className:P.a.button,type:"button","aria-label":"Close",onClick:c,children:Object(h.jsx)(E.a,{className:P.a.close})}),Object(h.jsx)("div",{className:P.a.modal,children:Object(h.jsx)("img",{src:t,alt:function(){var e=a.find((function(e){return e.largeImageURL===t}));if(e)return e.tags}()})})]}),R)},z=a(31),B=a.n(z),F=function(e){var t=e.handleClickLoadMore;return Object(h.jsx)("button",{className:B.a.button,type:"button",onClick:t,children:"Load more"})},G=a(32),D=a.n(G),H=a(16),Q=a.n(H),W=document.querySelector("#loading-root"),Z=function(){return Object(r.createPortal)(Object(h.jsx)("div",{className:Q.a.wrapper,children:Object(h.jsx)(D.a,{className:Q.a.loader,type:"Oval",color:"#3faae5",height:75,width:75})}),W)},J=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(1),o=Object(d.a)(r,2),i=o[0],b=o[1],p=Object(n.useState)([]),j=Object(d.a)(p,2),m=j[0],f=j[1],O=Object(n.useState)(0),_=Object(d.a)(O,2),v=_[0],x=_[1],y=Object(n.useState)(0),k=Object(d.a)(y,2),S=k[0],C=k[1],I=Object(n.useState)(null),N=Object(d.a)(I,2),E=N[0],q=N[1],P=Object(n.useState)("idle"),R=Object(d.a)(P,2),z=R[0],B=R[1],G=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.page,n=t.query,e.next=3,w({page:a,query:n});case 3:return c=e.sent,C(c.data.totalHits),e.abrupt("return",c.data.hits);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===a.trim()||a.length<2||function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B("pending"),e.next=3,G({page:i,query:a});case 3:t=e.sent,1===i?(f(t),M(-document.documentElement.scrollHeight)):f((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t))})),B("resolved");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,i]),Object(n.useEffect)((function(){x(m.length)}),[m]);var D=function(){q(null)},H=m.length>0&&v<S,Q="pending"===z;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g,{handleQuery:function(e){var t=e.trim().split(" ").filter((function(e){return""!==e&&" "!==e})).join("+");c(t),b(1)}}),Q&&Object(h.jsx)(Z,{}),Object(h.jsx)(L,{images:m,handleClickImage:function(e){q(e)}}),H&&Object(h.jsx)(F,{handleClickLoadMore:function(){b((function(e){return e+1}))}}),E&&Object(h.jsx)(U,{url:E,images:m,handleCloseModal:D,handleBackdropClose:function(e){"IMG"!==e.target.nodeName&&D()}})]})};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(J,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.cf801b71.chunk.js.map